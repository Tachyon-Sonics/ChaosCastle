DEFINITION MODULE GrotteSupport;

 FROM Memory IMPORT SET16, CARD8, INT8, CARD16, INT16, CARD32, INT32;
 FROM Clock IMPORT TimePtr;

 TYPE
  OBJECT = (EMPTY, PLAYER, K0, K1, K2, K3, K4, GN1, GN2, ASC, WOOF,
            L1, L2, L3, BALL, PIC, PLAT, TPLAT, NID, BUB,
            BN, DL, BM, SBN, MR);
  K2Line = ARRAY[0..71] OF CARD8;
  K2List = ARRAY[0..19] OF POINTER TO K2Line;
  BSetArr10 = ARRAY[0..10] OF SET16;
  DIRECTION = (NUL, LEFT, JUMP, RIGHT);
  CreateProc = PROCEDURE(OBJECT, INT8, INT8, INT8, INT8, CHAR);
  Attr = RECORD
   nb, dt, nt, timeout, ct, co: CARD8;
  END;
  Attrs = ARRAY[MIN(OBJECT)..MAX(OBJECT)] OF Attr;

 VAR
  Create: CreateProc;
  time: TimePtr;
  score, followscore: CARD32;
  made: BSetArr10;
  stat: (Playing, GameOver, Finish, Break);
  drsK2: ARRAY[0..19] OF K2Line;
  drK2: K2List;
  ppos: ARRAY[0..3] OF RECORD x, y: INT8 END;
  l2count, oldl2, blvcount, oldblv, pcount, ndoor, level, game: CARD8;
  pvie, oldpvie: INT8;
  attr: Attrs;

 PROCEDURE Rnd(): CARD16;

 PROCEDURE WL(s: ARRAY OF CHAR);

 PROCEDURE WriteCard(c: CARD32);

 PROCEDURE Random(): CARD16;

 PROCEDURE ReadDir(VAR ch: CHAR);

 PROCEDURE BigInit;

 PROCEDURE BigFlush;

 PROCEDURE Gameover(score: CARD32);

 PROCEDURE ReadGame(VAR level, game: CARD8);

 PROCEDURE ShowClock;

 PROCEDURE TypeOf(ch: CHAR): OBJECT;

 PROCEDURE SetColor(ch: CHAR);

 PROCEDURE LoadGame(C: CreateProc; VAR ax, ay: INT8);

 PROCEDURE DisplayInstructions;

 PROCEDURE InitK2Dirs;

END GrotteSupport.
